# Реализация плагина стороны клиента #

Для разработки плагина необходимо подключить файл DCES\_API.jar, содержащий в себе все нужные определения, и в частности описанные далее классы `Plugin` и `PluginEnvironment`.

Плагин - это jar файл, который содержит класс, реализующий интерфейс `Plugin` и помеченный аннотацией `@DCESPluginLoadable`.

Конструктор плагина никогда не вызывается вручную, плагины создает DCES API своими средствами, при этом используется конструктор `Plugin(PluginEnvironment)`. Такой конструктор _обязательно_ должен быть определен.
Полученный в конструкторе объект класса PluginEnvironment следует сохранить, и пользоваться потом его методами по необходимости

Далее описан интерфейс `Plugin`
```
public interface Plugin {

  //плагин должен вернуть JPanel, на котором он рисуется
  public JPanel getPanel();

  //вызывается, когда пользователь переключается на плагин
  public void activate();

  //Вызывается, когда пользователь переключается с этого плагина на какой-то другой
  public void deactivate();

}
```

В интерфейсе `PluginEnvironment` есть следующие методы

```
public interface PluginEnvironment {     

  //Установить заголовок задачи. 
  //Заголовки задач чаще всего располагаются на кнопках выбора задач
  public void setTitle(String title);

  //Посылка решения участника и получение ответа. Ответ и решение
  //имеют тип HashMap<String, String>. Плагины стороны клиента и сервера
  //сами определяют, что содержится в этих HashMap.
  //Метод бросает исключение, если отослать решение не удалось. Плагин не должен говорить
  //пользователю, что что-то не так, система сама отображает всю информацию об ошибках.
  //Плагин должен лишь принять к сведенью факт, что решение не было отослано
  public HashMap<String, String> submitSolution(HashMap<String, String> solution) throws GeneralRequestFailureException;

  //Это каталог, в котором хранится условие задачи. Условие автоматически
  //загружается с сервера. Плагин сам ответственен за
  //содержимое этого каталога, и должен знать в каких файлах какую информацию искать.
  //Писать или читать что-то вне этого каталога крайне не рекомендуется
  public File getProblemFolder();

  //Каждая задача имеет имя, установленное при настройке контеста. Метод возвращает
  //имя задачи.
  public String getProblemName();

}
```

Средства для отладки плагина стороны клиента описаны в статье [отладка плагина стороны клиента](ClientPluginDebug.md).